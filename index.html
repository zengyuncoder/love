<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>抽奖转盘</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="wheelpage.css">
</head>
<body>
<div id="wheel-wrap">
    <div id="w-tit" style="color: #f10f0f">
        爱的魔力大转盘
    </div>
    <div id="w-main">
        <div id="rotate">
            <div id="pointer"></div>
            <div id="rotatein">
                <div class="awardCard1">
                    <div class="prize prize_1"><strong>棒棒糖</strong><br><span>一个</span></div>
                    <div class="prize prize_2"><strong>辣条</strong><br><span>一包</span></div>
                    <div class="prize prize_3"><strong>任意大餐</strong><br><span>一份</span></div>
                    <div class="prize prize_4"><strong>520元</strong><br><span>红包</span></div>
                    <div class="prize prize_5"><strong>化妆品</strong><br><span>套装</span></div>
                    <div class="prize prize_6"><strong>品牌包包</strong><br><span>一个</span></div>
                    <div class="prize prize_7"><strong>谢谢惠顾</strong><br><span></span></div>
                    <div class="prize prize_8"><strong>苹果14</strong><br><span>手机一部</span></div>
                </div>
                <div class="awardCard2">
                    <div class="prize prize_1"><strong>棒棒糖</strong><br><span>一个</span></div>
                    <div class="prize prize_2"><strong>奥利奥饼干</strong><br><span>一包</span></div>
                    <div class="prize prize_3"><strong>52元</strong><br><span>红包</span></div>
                    <div class="prize prize_4"><strong>旋转星空灯</strong><br><span>一个</span></div>
                    <div class="prize prize_5"><strong>艾莎公主娃娃</strong><br><span>一个</span></div>
                    <div class="prize prize_6"><strong>奥特曼</strong><br><span>全套</span></div>
                    <div class="prize prize_7"><strong>儿童显微镜</strong><br><span>一台</span></div>
                    <div class="prize prize_8"><strong>儿童望远镜</strong><br><span>一台</span></div>
                </div>
            </div>

        </div>
		<!--
        <div class="button">
            <p>Click me</p>
        </div>
		-->
    </div>
    <div id="w-foot">
<!--        <div class="tiemsbox">您还有<span class="times"></span>次抽奖机会</div>-->
<!--        <p id="rule">查看活动规则</p>-->
    </div>
    <div id="dialogbox">
        <div class="dialogmask"></div>
        <div class="dialogcard">
            <div class="dialogclose">
                <span class="closebtn"></span>
            </div>
            <div class="card1">
                <div class="dialogtit">恭喜<span id="name"></span>获得 <br><span id="award" style="color: #864afc"></span></div>
            </div>
            <!--<div class="card2">
                <p>很遗憾没中奖</p>
            </div>
            <div class="card3">
                <p>您的<span class="times"></span>次机会已用完</p>
            </div>-->
        </div>
    </div>
</div>
<script type="text/javascript">
    setSize();
    window.addEventListener("resize",setSize,false);
    function setSize(){
        var oHtml = document.getElementsByTagName("html")[0];
        var oBody = document.getElementsByTagName("body")[0];
        var oWidth = window.innerWidth < 480 ? window.innerWidth : 480;
        oHtml.style.fontSize =oWidth/18+"px";
        oBody.style.visibility = "visible";
    };
</script>
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript">
    $(function () {
        //切换转盘奖品
        $(".awardCard1").show()//显示内容
        $(".awardCard2").hide()//隐藏内容
        var checked = true;
        $(".button").on("click", function() {
            checked = !checked;
            if (checked) {
                $(".awardCard1").show()//显示内容
                $(".awardCard2").hide()//隐藏内容
            } else {
                $(".awardCard1").hide()//显示内容
                $(".awardCard2").show()//显示内容
            }
        })

        //raward 获奖情况
        function raward(rotate){
            switch (rotate){
                case 337.5 :{
                    if(checked){
                        return "棒棒糖一个"
                    }else {
                        return "棒棒糖一个"
                    }
                    break;
                }
                case 292.5 :{
                    if(checked){
                        return "辣条一包"
                    }else {
                        return "奥利奥饼干一包"
                    }
                    break;
                }
                case 247.5 :{
                    if(checked){
                        return "任意大餐一份"
                    }else {
                        return "52元红包"
                    }
                    break;
                }
                case 202.5 :{if(checked){
                    return "520元红包"
                }else {
                    return "旋转星空灯一个"
                }
                    break;}
                case 157.5 :{if(checked){
                    return "化妆品套装"
                }else {
                    return "艾莎公主娃娃一个"
                }
                    break;}
                case 112.5 :{if(checked){
                    return "品牌包包一个"
                }else {
                    return "奥特曼全套"
                }
                    break;}
                case 67.5 :{ if(checked){
                    return "谢谢惠顾"
                }else {
                    return "儿童显微镜一台"
                }
                    break;}
                case 22.5 :{if(checked){
                    return "苹果14手机一部"
                }else {
                    return "儿童望远镜一台"
                }
                    break;}
                default : {if(checked){
                    return "辣条一包"
                }else {
                    return "奥利奥饼干一包"
                }
                    break;}
            }
        }
        //确定概率
        function posibility(){
            var random = parseInt(Math.random()*1000);
          
			if(random < 880){ //  1/1000概率
                return 22.5;
            }else if( 880 < random && random <= 900 ){ // 20/1000概率
                return 67.5;
            }else if( 910 < random && random <= 920 ){ // 100/1000概率
                return 112.5;
            }else if( 920 < random && random <= 930 ){ // 150/1000概率
                return 157.5;
            }else if( 930 < random && random <= 940 ){ // 150/1000概率
                return 202.5;
            }else if( 940 < random && random <= 950){ // 150/1000概率
                return 247.5;
            }else if( 950 < random && random <= 960){ // 200/1000概率
                return 292.5;
            }else{ // 229/1000概率
                return 337.5;
            }
        };

        //转盘逻辑
        var initrotate = 0;
        function handlebar() {
            var rotate = initrotate + (360 - initrotate%360) + 360 + posibility();
            $("#rotatein").css({
                "-webkit-transition": "all 2s ease-out",
                "-ms-transition": "all 2s ease-out",
                "transition":" all 2s ease-out",
                "-webkit-transform": "rotate("+ rotate +"deg)",
                "-moz-transform": "rotate("+ rotate +"deg)",
                "-ms-transform": "rotate("+ rotate +"deg)",
                "-o-transform": "rotate("+ rotate +"deg)",
                "transform":"rotate("+ rotate +"deg)"
            });
            initrotate = rotate;
            var rawartText = raward(rotate%360);
            setTimeout(function () {
                dialoginfo(rawartText);
            },2100)
        };

        //点击
        // var timecont = 3;
        var oDialog = $("#dialogbox");
        // $(".times").text(timecont);
        $(".closebtn ").click(function () {
            $(oDialog).removeClass("active");
            $(oDialog).find("div[class^='card']").removeClass("active");
        });
        $(".dialogmask").click(function () {
            $(oDialog).removeClass("active");
            $(oDialog).find("div[class^='card']").removeClass("active");
        });
        $("#pointer").click(function () {
         /*   if(timecont > 0){
                handlebar();
            }else if(timecont == 0){
                flag = 3;
                dialoginfo(flag);
                timecont ++ ;
            };
            timecont -- ;
            $(".times ").text(timecont);*/
            handlebar();
        });



        //dialog
        function dialoginfo(rawartText){
           /* $(oDialog).find("div[class^='card']").removeClass("active");
            if(flag == 1){
                $(oDialog).find(".card1").addClass("active");
                $(oDialog).find("#award").text(""+ rawartText +"");
                $(oDialog).addClass("active");
            }else if (flag == 2){
                $(oDialog).find(".card2").addClass("active");
                $(oDialog).addClass("active");
            }else if(flag == 3){
                $(oDialog).find(".card3").addClass("active");
                $(oDialog).addClass("active");
            }*/
            $(oDialog).find(".card1").addClass("active");
            $(oDialog).find("#award").text(""+ rawartText +"");
            if(checked){
                $(oDialog).find("#name").text("田蓉小朋友");
            }else {
                $(oDialog).find("#name").text("田蓉小朋友");
            }
            $(oDialog).addClass("active");
        };

        //获奖信息
    });
</script>
</body>
</html>
